{"version":3,"file":"CodeBlock.js","sources":["../../../src/components/CodeBlock/CodeBlock.tsx"],"sourcesContent":["import React, { useLayoutEffect, useState } from \"react\";\nimport { cn } from \"../classnames.js\";\nimport { highlight, isSupportedLanguage, type Language } from \"./highlight.js\";\n\nexport type CodeBlockProps = {\n  /**\n   * Your code (as text).\n   */\n  content: string;\n\n  /**\n   * Whether or not to apply syntax highlighting to the rendered code.\n   *\n   * @default true\n   */\n  highlighting?: boolean | undefined;\n\n  /**\n   * Specify the code language to apply syntax highlighting to the code block.\n   *\n   * @default text\n   */\n  language?: Language | undefined;\n};\n\n/**\n * A code block renders code in a pre-formatted monospace text block with syntax highlighting.\n *\n * ![Code block with syntax highlighting](./screenshots/code_block_with_highlighting.png)\n *\n * @param props\n * @example\n * ```tsx\n * import { CodeBlock } from \"@netlify/sdk/ui/react/components\";\n *\n * <CodeBlock content={`<p>Hello, world!</p>`} language=\"html\" />\n * ```\n * @example\n * ```tsx\n * import { CodeBlock } from \"@netlify/sdk/ui/react/components\";\n *\n * <CodeBlock content={`<p>Hello, world!</p>`} />\n * ```\n */\nexport const CodeBlock = ({\n  content,\n  highlighting = true,\n  language = \"text\",\n}: CodeBlockProps) => {\n  const [nodes, setNodes] = useState<React.JSX.Element | null>(null);\n\n  if (!isSupportedLanguage(language)) {\n    language = \"text\";\n  }\n\n  useLayoutEffect(() => {\n    if (highlighting) {\n      void (async () => {\n        setNodes(\n          await highlight(content, {\n            components: {\n              pre: ({ children, className, ...otherProps }) => (\n                <pre className={cn(className, \"!tw-bg-black\")} {...otherProps}>\n                  {children}\n                </pre>\n              ),\n            },\n            language,\n            theme: \"github-dark\",\n          }),\n        );\n      })();\n    }\n  }, [content, highlighting, language]);\n\n  // Code highlighting is asynchronous. It will usually complete before a user can even notice it,\n  // but in the event it's taking a while, we show un-highlighted code while it's loading.\n  return (\n    nodes ?? (\n      <pre className=\"tw-bg-black\">\n        <code className=\"tw-text-white\">{content}</code>\n      </pre>\n    )\n  );\n};\n"],"names":[],"mappings":";;;;AA4CO,MAAM,YAAY,CAAC;AAAA,EACxB;AAAA,EACA,eAAe;AAAA,EACf,WAAW;AACb,MAAsB;AACpB,QAAM,CAAC,OAAO,QAAQ,IAAI,SAAmC,IAAI;AAE7D,MAAA,CAAC,oBAAoB,QAAQ,GAAG;AACvB,eAAA;AAAA,EACb;AAEA,kBAAgB,MAAM;AACpB,QAAI,cAAc;AAChB,YAAM,YAAY;AAChB;AAAA,UACE,MAAM,UAAU,SAAS;AAAA,YACvB,YAAY;AAAA,cACV,KAAK,CAAC,EAAE,UAAU,WAAW,GAAG,WAAW,MACxC,oBAAA,OAAA,EAAI,WAAW,GAAG,WAAW,cAAc,GAAI,GAAG,YAChD,UACH;AAAA,YAEJ;AAAA,YACA;AAAA,YACA,OAAO;AAAA,UAAA,CACR;AAAA,QAAA;AAAA,MACH;IAEJ;AAAA,EACC,GAAA,CAAC,SAAS,cAAc,QAAQ,CAAC;AAKlC,SAAA,SACG,oBAAA,OAAA,EAAI,WAAU,eACb,8BAAC,QAAK,EAAA,WAAU,iBAAiB,UAAA,QAAA,CAAQ,EAC3C,CAAA;AAGN;"}